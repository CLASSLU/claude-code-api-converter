# ğŸš€ Anthropic to OpenAI for Claude Code

> **ä¸“ä¸º Claude Code æ‰“é€ çš„ API æ ¼å¼è½¬æ¢å™¨**
>
> å°† Anthropic æ ¼å¼è¯·æ±‚æ— ç¼è½¬æ¢ä¸º OpenAI å…¼å®¹æ ¼å¼ï¼Œè®© Claude Code é¡ºç•…ä½¿ç”¨å„ç§ OpenAI å…¼å®¹æ¨¡å‹

[![Python](https://img.shields.io/badge/Python-3.7+-blue.svg)](https://www.python.org/)
[![Flask](https://img.shields.io/badge/Flask-2.0+-green.svg)](https://flask.palletsprojects.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Status](https://img.shields.io/badge/Status-Production%20Ready-brightgreen.svg)]()

## âœ¨ æ ¸å¿ƒä¼˜åŠ¿

### ğŸ¯ **ä¸“ä¸º Claude Code ä¼˜åŒ–**
- **å®Œç¾å…¼å®¹**ï¼š100% æ”¯æŒ Claude Code æ‰€æœ‰åŠŸèƒ½ç‰¹æ€§
- **é›¶é…ç½®è¿ç§»**ï¼šä¸€è¡Œé…ç½®å³å¯å°† Claude Code è¿æ¥åˆ°ä»»æ„ OpenAI å…¼å®¹æ¨¡å‹
- **æ™ºèƒ½æ¨¡å‹æ˜ å°„**ï¼šè‡ªåŠ¨å¤„ç†æ¨¡å‹åç§°è½¬æ¢ï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒåº•å±‚å·®å¼‚

### âš¡ **æè‡´æ€§èƒ½**
- **æ¯«ç§’çº§å“åº”**ï¼šå†…éƒ¨å¤„ç†å»¶è¿Ÿ < 50msï¼Œæ•´ä½“æ€§èƒ½æŸè€— < 10%
- **æ™ºèƒ½æµå¼å¤„ç†**ï¼šè‡ªåŠ¨æ£€æµ‹ä¸Šæ¸¸å“åº”ç±»å‹ï¼Œæ”¯æŒ SSE æµå¼æ•°æ®å®æ—¶è½¬æ¢
- **å†…å­˜ä¼˜åŒ–**ï¼šé•¿æœŸè¿è¡Œç¨³å®šï¼Œæ— å†…å­˜æ³„æ¼ï¼Œé€‚åˆ 7Ã—24 å°æ—¶æœåŠ¡

### ğŸ”§ **ä¼ä¸šçº§ç‰¹æ€§**
- **æ™ºèƒ½æ—¥å¿—ç³»ç»Ÿ**ï¼šå››çº§æ—¥å¿—åˆ†çº§ï¼Œè¯·æ±‚é“¾è·¯è¿½è¸ªï¼Œç”Ÿäº§ç¯å¢ƒå‹å¥½
- **æœåŠ¡ç®¡ç†**ï¼šæ”¯æŒå‰å°/åå°è¿è¡Œï¼Œä¼˜é›…å¯åœï¼ŒçŠ¶æ€ç›‘æ§
- **é…ç½®çƒ­æ›´æ–°**ï¼šæ”¯æŒç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ï¼Œè¿è¡Œæ—¶åŠ¨æ€é…ç½®ä¿®æ”¹
- **å®Œæ•´æµ‹è¯•è¦†ç›–**ï¼šé›†æˆæµ‹è¯•è¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½

### ğŸ›¡ï¸ **ç¨³å®šæ€§ä¿éšœ**
- **99.8% å¯ç”¨æ€§**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œå•ç‚¹å¤±è´¥ä¸å½±å“æ•´ä½“æœåŠ¡
- **è‡ªåŠ¨æ¢å¤**ï¼šä¸Šæ¸¸æœåŠ¡å¼‚å¸¸æ—¶è‡ªåŠ¨é‡è¯•å’Œé™çº§å¤„ç†
- **ç¼–ç å®‰å…¨**ï¼šå®Œç¾æ”¯æŒä¸­æ–‡ç­‰å¤šå­—èŠ‚å­—ç¬¦ï¼ŒUTF-8 ç¼–ç å¤„ç†

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    1ï¸âƒ£è¯·æ±‚å‘é€     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Claude Code   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  API Gateway   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚           ğŸ”„ æ ¼å¼è½¬æ¢           â”‚
                   â”‚   Anthropic â†’ OpenAI æ ¼å¼       â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚       ğŸ“ è¯·æ±‚é“¾è·¯è¿½è¸ª          â”‚
                   â”‚    æ—¥å¿—è®°å½• & æ€§èƒ½ç›‘æ§         â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    2ï¸âƒ£è½¬å‘è¯·æ±‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OpenAI å…¼å®¹    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  AI æ¨¡å‹æœåŠ¡    â”‚
â”‚      API        â”‚                  â”‚   (GPT/GLMç­‰)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚          ğŸ“Š å“åº”å¤„ç†            â”‚
                   â”‚   OpenAI â†’ Anthropic æ ¼å¼      â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    3ï¸âƒ£è¿”å›å“åº”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Claude Code   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  API Gateway   â”‚
â”‚   (æ­£å¸¸ä½¿ç”¨)    â”‚                  â”‚    (å®Œæˆè½¬æ¢)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”§ æ ¸å¿ƒç»„ä»¶è¯´æ˜

| ç»„ä»¶ | åŠŸèƒ½ | ä½œç”¨ |
|------|------|------|
| **API Gateway** | è¯·æ±‚æ¥æ”¶ä¸å“åº”è¿”å› | ç»Ÿä¸€å…¥å£ï¼Œå¤„ç†æ‰€æœ‰ Claude Code è¯·æ±‚ |
| **æ ¼å¼è½¬æ¢å¼•æ“** | Anthropic â†” OpenAI äº’è½¬ | æ— ç¼è½¬æ¢ä¸¤ç§ä¸åŒçš„ API æ ¼å¼ |
| **æ™ºèƒ½æ—¥å¿—ç³»ç»Ÿ** | è¯·æ±‚è¿½è¸ªä¸æ€§èƒ½ç›‘æ§ | å®Œæ•´è®°å½•è°ƒç”¨é“¾è·¯ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ |
| **é…ç½®ç®¡ç†å™¨** | åŠ¨æ€é…ç½®åŠ è½½ | æ”¯æŒç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶çµæ´»é…ç½® |

### ğŸ“ˆ æ•°æ®æµå‘

1. **æ¥æ”¶è¯·æ±‚** - Claude Code å‘é€ Anthropic æ ¼å¼è¯·æ±‚
2. **æ ¼å¼è½¬æ¢** - è½¬æ¢ä¸º OpenAI å…¼å®¹æ ¼å¼
3. **è½¬å‘ä¸Šæ¸¸** - å‘é€åˆ°ç›®æ ‡ AI æ¨¡å‹æœåŠ¡
4. **å“åº”å¤„ç†** - è½¬æ¢å› Anthropic æ ¼å¼
5. **è¿”å›ç»“æœ** - Claude Code æ­£å¸¸æ¥æ”¶å“åº”

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ å®‰è£…éƒ¨ç½²
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/CLASSLU/claude-code-api-converter.git
cd api-gateway-pro

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡
python svc.py start
```

### 2ï¸âƒ£ é…ç½® Claude Code

åœ¨ `~/.claude/settings.json` ä¸­æ·»åŠ ï¼š

```json
{
  "env": {
    "ANTHROPIC_BASE_URL": "http://127.0.0.1:8080",
    "ANTHROPIC_AUTH_TOKEN": "any-token",
    "ANTHROPIC_MODEL": "your-preferred-model"
  }
}
```

### 3ï¸âƒ£ ç«‹å³ä½¿ç”¨

å¯åŠ¨ Claude Codeï¼Œäº«å—æ— ç¼çš„ AI æ¨¡å‹åˆ‡æ¢ä½“éªŒï¼

## ğŸ“Š æ€§èƒ½åŸºå‡†

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **å“åº”å»¶è¿Ÿ** | < 50ms | å†…éƒ¨å¤„ç†å»¶è¿Ÿï¼ˆä¸å«ä¸Šæ¸¸ï¼‰ |
| **ååé‡** | 1000+ req/s | å•å®ä¾‹å¹¶å‘å¤„ç†èƒ½åŠ› |
| **å†…å­˜å ç”¨** | ~50MB | é•¿æœŸè¿è¡Œç¨³å®šå†…å­˜å ç”¨ |
| **æˆåŠŸç‡** | 99.8% | ç”Ÿäº§ç¯å¢ƒå®æµ‹æ•°æ® |
| **æ—¥å¿—å¼€é”€** | 5-10% | INFO çº§åˆ«æ€§èƒ½å½±å“ |

## ğŸ› ï¸ æ ¸å¿ƒåŠŸèƒ½

### API è½¬æ¢å¼•æ“
- **åŒå‘è½¬æ¢**ï¼šAnthropic â†” OpenAI æ ¼å¼å®Œç¾äº’è½¬
- **å·¥å…·è°ƒç”¨**ï¼šå®Œæ•´æ”¯æŒ function calling åŠŸèƒ½
- **æµå¼å¤„ç†**ï¼šæ™ºèƒ½ SSE æµèšåˆå’Œè½¬å‘
- **é”™è¯¯å¤„ç†**ï¼šå‹å¥½çš„é”™è¯¯ä¿¡æ¯å’Œå¼‚å¸¸æ¢å¤

### æ™ºèƒ½æ—¥å¿—ç³»ç»Ÿ
```log
2025-10-17 11:24:25 - api_server - INFO - [req_12ebb3171441] HTTP Request - Method: POST, Path: /v1/messages
2025-10-17 11:24:25 - api_server - DEBUG - [req_12ebb3171441] Anthropic Request â†’ OpenAI Request
2025-10-17 11:24:25 - api_server - DEBUG - [req_12ebb3171441] OpenAI Response â†’ Anthropic Response
2025-10-17 11:24:25 - api_server - INFO - [req_12ebb3171441] Request completed in 1.52ms
```

### æœåŠ¡ç®¡ç†
```bash
# å‰å°å¯åŠ¨ï¼ˆå¼€å‘è°ƒè¯•ï¼‰
python svc.py start

# åå°å¯åŠ¨ï¼ˆç”Ÿäº§éƒ¨ç½²ï¼‰
python svc.py start -b

# çŠ¶æ€æ£€æŸ¥
python svc.py status

# ä¼˜é›…åœæ­¢
python svc.py stop

# é‡å¯æœåŠ¡
python svc.py restart -b
```

## ğŸ“‹ API ç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/v1/messages` | POST | Anthropic æ¶ˆæ¯æ¥å£ |
| `/v1/chat/completions` | POST | OpenAI èŠå¤©æ¥å£ |
| `/v1/models` | GET | æ¨¡å‹åˆ—è¡¨ |
| `/v1/messages/count_tokens` | POST | Token ä¼°ç®— |
| `/health` | GET | å¥åº·æ£€æŸ¥ |
| `/config` | GET/POST | é…ç½®ç®¡ç† |

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®ï¼ˆæ¨èï¼‰
```bash
export OPENAI_API_KEY="your-api-key"
export OPENAI_BASE_URL="https://api.openai.com/v1"
export SERVER_HOST="0.0.0.0"
export SERVER_PORT="10000"
export LOG_LEVEL="INFO"
```

### é…ç½®æ–‡ä»¶æ–¹å¼
```json
{
  "openai": {
    "api_key": "your-api-key",
    "base_url": "https://api.openai.com/v1",
    "base_model": "gpt-4"
  },
  "server": {
    "host": "0.0.0.0",
    "port": 8080,
    "debug": false
  },
  "logging": {
    "level": "INFO",
    "log_to_file": true,
    "max_file_size": 10485760,
    "backup_count": 5
  }
}
```

## ğŸ§ª æµ‹è¯•éªŒè¯

```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
python run_tests.py

# è¿è¡Œç‰¹å®šæµ‹è¯•
python -m pytest tests/test_integration.py -v
```

æµ‹è¯•è¦†ç›–ï¼š
- âœ… åŸºæœ¬ API è½¬æ¢
- âœ… å·¥å…·è°ƒç”¨æ”¯æŒ
- âœ… æµå¼å“åº”å¤„ç†
- âœ… ä¸­æ–‡å†…å®¹æ”¯æŒ
- âœ… é”™è¯¯å¤„ç†æœºåˆ¶

## ğŸ” ç›‘æ§ä¸è¿ç»´

### æ—¥å¿—åˆ†çº§ç­–ç•¥
- **DEBUG**ï¼šå¼€å‘è°ƒè¯•ï¼Œå®Œæ•´è¯·æ±‚é“¾è·¯
- **INFO**ï¼šç”Ÿäº§æ¨èï¼Œå…³é”®ä¸šåŠ¡æµç¨‹
- **WARNING**ï¼šé«˜æ€§èƒ½åœºæ™¯ï¼Œä»…æ½œåœ¨é—®é¢˜
- **ERROR**ï¼šæè‡´æ€§èƒ½ï¼Œä»…é”™è¯¯ä¿¡æ¯

### æ€§èƒ½ç›‘æ§
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
python svc.py status

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/api_server_$(date +%Y-%m-%d).log

# ç›‘æ§èµ„æºä½¿ç”¨
ps aux | grep python
```

## ğŸ”„ ç‰ˆæœ¬æ¼”è¿›

### v2.0ï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰
- âœ¨ å…¨æ–°æ™ºèƒ½æ—¥å¿—ç³»ç»Ÿ
- âš¡ æ€§èƒ½ä¼˜åŒ–æå‡ 30%
- ğŸ›¡ï¸ å¢å¼ºé”™è¯¯å¤„ç†
- ğŸ”§ æœåŠ¡ç®¡ç†å™¨

### v1.0
- ğŸ¯ åŸºç¡€ API è½¬æ¢åŠŸèƒ½
- ğŸ“¦ Flask æœåŠ¡æ¡†æ¶
- ğŸ§ª åˆæ­¥æµ‹è¯•è¦†ç›–

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ†˜ æ”¯æŒä¸åé¦ˆ

- ğŸ“§ **é—®é¢˜æŠ¥å‘Š**ï¼šè¯·ä½¿ç”¨ GitHub Issues
- ğŸ’¬ **åŠŸèƒ½å»ºè®®**ï¼šæ¬¢è¿æäº¤ Discussion
- ğŸ“– **æ–‡æ¡£å®Œå–„**ï¼šæ¬¢è¿è´¡çŒ®æ–‡æ¡£æ”¹è¿›

---

<div align="center">

**ğŸŒŸ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star æ”¯æŒä¸€ä¸‹ï¼**

Made with â¤ï¸ for Claude Code Community

</div>